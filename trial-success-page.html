<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trial Activated | PartsMateTH</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --c1: 56,189,248; /* sky blue */
      --c2: 16,185,129; /* emerald */
    }
    body {
      min-height: 100vh;
      background: linear-gradient(135deg, rgba(var(--c1),0.9), rgba(var(--c2),0.95));
      background-attachment: fixed;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Poppins','Inter',sans-serif;
      color: white;
    }
    #bgParticles {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }
    .glass {
      position: relative;
      z-index: 10;
      background: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.25);
      backdrop-filter: blur(20px);
      border-radius: 1.5rem;
      padding: 2.5rem;
      text-align: center;
      box-shadow: 0 25px 40px rgba(0,0,0,0.25);
    }
    .accent-pill {
      background: linear-gradient(90deg, rgba(var(--c1),1), rgba(var(--c2),1));
    }
    .btn {
      transition: all 0.25s ease;
      font-weight: 500;
      border-radius: 0.75rem;
      padding: 0.8rem 1.25rem;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    }
    .reveal-box {
      display: inline-block;
      background: white;
      color: transparent;
      border-radius: 8px;
      padding: 8px 16px;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s ease;
      font-family: monospace;
      font-size: 1rem;
    }
    .reveal-box.revealed {
      color: #1a202c;
      background: #fff;
    }
  </style>
</head>
<body>
  <canvas id="bgParticles"></canvas>

  <div class="glass max-w-lg w-full text-gray-900">
    <div class="flex justify-center items-center gap-3 mb-6">
      <div class="accent-pill w-12 h-12 rounded-xl grid place-items-center shadow-md">
        <span class="text-2xl text-white">⭐</span>
      </div>
      <h1 class="text-3xl font-semibold text-white">Trial Registered</h1>
    </div>
    <p class="text-white/90 text-lg mb-4">Welcome to <strong>PartsMateTH</strong>! Your trial key has been activated successfully.</p>

<div id="trialDetails" class="opacity-0 transition-opacity duration-700 text-left">
  <p id="orderInfo" class="mb-2 text-white/90 text-md"></p>

  <p class="mb-2 text-lg text-white/90">License Key:</p>
  <div class="flex items-center gap-2 justify-center">
    <div id="licenseReveal" class="reveal-box" title="Click to reveal">
      Click to reveal license key
    </div>
    <button
      id="copyBtn"
      class="btn bg-white/90 text-gray-900 text-sm hidden"
      title="Copy license key"
    >
      Copy
    </button>
  </div>

  <div class="mt-4 space-y-1 text-white/90 text-md">
    <p id="planInfo"></p>
    <p>Start Date = The day you log in to the software first.</p>
    <p>End Date = 7 days after you first log in.</p>
  </div>
  <p class="mt-3 text-md text-white/90">*Your 7-day trial period will begin when you first log in.*</p>
  <p class="text-white/80 text-sm mt-4">A verification email has been sent. Please verify your email to start using PartsMateTH.</p>
</div>



    <a href="/" class="mt-6 inline-block btn bg-white text-gray-900 hover:bg-gray-100">Return to Home</a>
  </div>

  <script>
  // animated background
  (() => {
    const c=document.getElementById('bgParticles'),x=c.getContext('2d');
    let w,h,dpr,parts=[];
    function resize(){dpr=window.devicePixelRatio||1;w=c.width=innerWidth*dpr;h=c.height=innerHeight*dpr;c.style.width=innerWidth+'px';c.style.height=innerHeight+'px';}
    window.addEventListener('resize',resize);resize();
    const COUNT=Math.min(100,Math.floor((innerWidth*innerHeight)/16000));
    function rand(a,b){return a+Math.random()*(b-a);}
    function init(){parts=Array.from({length:COUNT}).map(()=>({x:rand(0,w),y:rand(0,h),vx:rand(-0.2,0.2),vy:rand(-0.2,0.2),r:rand(1,2)*dpr,hue:rand(160,200)}));}
    init();
    function step(){x.clearRect(0,0,w,h);for(const p of parts){p.x+=p.vx;p.y+=p.vy;if(p.x<0)p.x=w;if(p.x>w)p.x=0;if(p.y<0)p.y=h;if(p.y>h)p.y=0;
    x.beginPath();x.arc(p.x,p.y,p.r,0,Math.PI*2);x.fillStyle=`hsla(${p.hue},70%,60%,0.8)`;x.fill();}
    requestAnimationFrame(step);}requestAnimationFrame(step);
  })();

  // reveal logic
window.onload = () => {
  const p = new URLSearchParams(location.search);
  const key = p.get('key') || 'Pending...';
  const plan = p.get('plan') || 'Trial';
  const order = p.get('order') || '';

  const box = document.getElementById('licenseReveal');
  const copyBtn = document.getElementById('copyBtn');

  document.getElementById('planInfo').textContent = `Plan = ${plan}`;

  if (order) {
    document.getElementById('orderInfo').textContent = `Order No = ${order}`;
  }

  box.textContent = 'Click to reveal license key';

  // ✅ Reveal key toggle
  box.addEventListener('click', () => {
    box.classList.toggle('revealed');
    if (box.classList.contains('revealed')) {
      box.textContent = key;
      copyBtn.classList.remove('hidden');
    } else {
      box.textContent = 'Click to reveal license key';
      copyBtn.classList.add('hidden');
    }
  });

  // ✅ Copy button
  copyBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    navigator.clipboard.writeText(key);
    copyBtn.textContent = 'Copied';
    setTimeout(() => (copyBtn.textContent = 'Copy'), 1200);
  });

  // ✅ Fade-in animation only once
  setTimeout(() => document.getElementById('trialDetails').classList.remove('opacity-0'), 100);
};

</script>

</body>
</html>
